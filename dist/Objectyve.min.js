/**
 * Objectÿve framework bêta
 *
 * @author      Thomas Josseau
 * @version     0.8.2
 * @date        2015.11.20
 * @link        https://github.com/tjosseau/objectyve
 *
 * @description
 *      Prototype Factory framework in JavaScript.
 */
void function(y){var g,m,e,B;switch(y){case "client":g=window;break;case "server":g=GLOBAL;break;default:g={}}m="function"===typeof Object.setPrototypeOf?6:"function"===typeof function(){}.__proto__?5:4;B=g.Objectyve;var n=[0,8,1,new Date(2015,5,28)],l={silent:!1,strict:0,debug:0},r={amd:null},C={constructor:"initialize"},u=4<m?Object.create:function(){return function(a,b){function c(){}var d,e;c.prototype=a;d=new c;for(e in b)b.propertyIsEnumerable(e)&&(d[e]=b[e]);return d}}(),q=4<m?Object.defineProperty:
function(){try{return Object.defineProperty.apply(arguments[0],arguments)}catch(a){return(l.debug>=e.debug.MEDIUM||l.strict>=e.strict.HIGH)&&v("ECMAScript compatibility issue : "+a),arguments[0]}},w=4<m?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},D=6<=m?function(a,b){Object.setPrototypeOf(a,b);return a}:5==m?function(a,b){a.__proto__=b;return a}:function(a,b){for(var c in b)b.propertyIsEnumerable(c)&&(a[c]=b[c]);return a},z=function(){l.silent||"undefined"===
typeof console||(4<m?console.log.apply(console,arguments):console.log(arguments[0]));return arguments[0]},E=function(a){l.silent||"undefined"===typeof console||console.info(a)},v=function(a){l.silent||"undefined"===typeof console||console.warn(a)},f={object:function(a){return null!=a&&"object"===typeof a&&!f.array(a)},bool:function(a){return"boolean"===typeof a},array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},number:function(a){return"number"===typeof a&&!isNaN(parseFloat(a))&&
isFinite(a)},string:function(a){return"string"===typeof a},funct:function(a){return"function"===typeof a},container:function(a){return f.object(a)||f.array(a)},empty:function(a){for(var b in a)if(a.propertyIsEnumerable(b))return!1;return!0},ofType:function(a){return"object"===typeof a?f.object(a)?"object":f.array(a)?"array":"null":"number"===typeof a?f.number(a)?"number":"nan":typeof a}},p=function(a){var b,c;f.object(a)?b=!(c={}):f.array(a)?b=!(c=[]):(b=!0,c=a);if(!b)for(var d in a)a.propertyIsEnumerable(d)&&
(f.container(a[d])?c[d]=p(a[d]):c[d]=a[d]);return c},h=function(a,b){for(var c in b)b.propertyIsEnumerable(c)&&(a[c]=b[c]);return a},x=function(a,b){for(var c in b)b.propertyIsEnumerable(c)&&(c in C?a[C[c]]=b[c]:a[c]=b[c]);return a},A=function(){for(var a=[],b=0,c=arguments.length;b<c;b++)f.array(arguments[b])?a=a.concat(A.apply(null,arguments[b])):a.push(arguments[b]);return a},H=function(a,b){function c(){return a.apply(this,b)}c.prototype=a.prototype;return new c},F=function(a,b){var c,d,t,k;if(f.array(a))t=
a,k=[];else for(c in t=[],k={},a)t.push(a[c]);l.debug>=e.debug.ALL&&(E("Object\u00ffve: Loading modules..."),z(t));if(r.amd)g.define(t,function(){d=0;for(c in a)k[c]=arguments[d],d++;return b(k)});else{if("server"===y){for(c in a)k[c]=require(a[c]);return b(k)}if(l.strict>=e.strict.LOW)return v("Cannot require anything if no module loader is available."),b(k)}},G=function(a){l.debug>=e.debug.ALL&&(E("Object\u00ffve: Configuring..."),z(a));a&&(null!=a.silent&&(this.silent=!!a.silent),null!=a.debug&&
(!1===a.debug?this.debug=0:!0===a.debug?this.debug=1:0===a.debug?this.debug=0:0<a.debug&&3>=a.debug&&(this.debug=a.debug)),null!=a.strict&&(!1===a.strict?this.strict=0:!0===a.strict?this.strict=1:0===a.strict?this.strict=0:0<a.strict&&2>=a.strict&&(this.strict=a.strict)))};e={ECMAScript:m,debug:{NONE:0,MEDIUM:1,ALL:2},strict:{NONE:0,LOW:1,HIGH:2},options:l,plugins:r,noConflict:function(){g.Objectyve=B;null==g.Objectyve&&delete g.Objectyve;return e},version:function(){return this.version.build},configure:function(a){G.call(l,
a);return this},plug:function(a){h(r,a);return this},globalize:function(){for(var a=0,b=arguments.length;a<b;a++)g[arguments[a]]=e[arguments[a]];return this},util:{is:f,create:u,clone:p,copy:h,copySafe:x,list:A,defineModule:F},echo:z,warn:v,Skeleton:{modifiers:{"public":{},hidden:{},shared:{},concealed:{},nested:{}},set:function(a,b,c){a.__meta__.skeleton[c][b]=!0},unset:function(a,b){var c=a.__meta__,d;for(d in c.skeleton)c.skeleton[d][b]&&delete c.skeleton[d][b]}},Factory:D({metadata:function(){return this.__meta__},
options:function(){return this.__meta__.options},plugins:function(){return this.__meta__.plugins},create:function(a){return u(this.prototype,a)},set:function(a){a.configure&&(this.configure(a.configure),delete a.configure);a.plug&&(this.plug(a.plug),delete a.plug);for(var b in a)if(f.funct(this[b]))this[b](a[b]);else{if(this.options().strict===e.strict.HIGH)throw"Invalid call '"+b+"' while creating new Prototype.";this.options().strict===e.strict.LOW&&v("Invalid call '"+b+"' while creating new Prototype.")}return this},
extend:function(a){this.prototype=u(a.prototype);a.__meta__&&a.__meta__.skeleton&&(h(this.__meta__.skeleton["public"],a.__meta__.skeleton["public"]),h(this.__meta__.skeleton.hidden,a.__meta__.skeleton.hidden));this.parent=a;this["super"]=a.prototype;return this},mixin:function(){for(var a=A.apply(null,arguments),b,c=0,d=a.length;c<d;c++)if(b=a[c],f.funct(b))h(this.prototype,b.prototype),b.__meta__&&b.__meta__.skeleton&&(h(this.__meta__.skeleton["public"],b.__meta__.skeleton["public"]),h(this.__meta__.skeleton.hidden,
b.__meta__.skeleton.hidden));else if(f.object(b))h(this.prototype,b);else throw"Cannot mixin '"+b+"' with a prototype. Mixins require a function or an object.";return this},augment:function(){this.mixin.apply(this,arguments);return this},"public":function(a){a=x({},a);h(this.prototype,a);for(var b in a)e.Skeleton.unset(this,b),e.Skeleton.set(this,b,"public"),q(this.prototype,b,{writable:!0,enumerable:!0,configurable:!0});return this},attr:function(a){this["public"](a);return this},hidden:function(a){a=
x({},a);h(this.prototype,a);for(var b in a)e.Skeleton.unset(this,b),e.Skeleton.set(this,b,"hidden"),q(this.prototype,b,{writable:!0,enumerable:!0,configurable:!0});return this},shared:function(a){a=x({},a);h(this.prototype,a);for(var b in a)e.Skeleton.unset(this,b),e.Skeleton.set(this,b,"shared"),q(this.prototype,b,{writable:!0,enumerable:!0,configurable:!0});return this},method:function(a){this.shared(a);return this},concealed:function(a){a=x({},a);h(this.prototype,a);for(var b in a)e.Skeleton.unset(this,
b),e.Skeleton.set(this,b,"concealed"),q(this.prototype,b,{writable:!0,enumerable:!1,configurable:!0});return this},"static":function(a){h(this,a);return this},nested:function(a){for(var b in a)a.propertyIsEnumerable(b)&&(this.__meta__.skeleton.nested[b]=p(a[b]));return this},initialize:function(a){this["public"]({initialize:a});return this},constructor:function(a){this.initialize(a);return this},main:function(a){this["static"]({main:a});return this},module:function(a){if(!a)return this.__meta__.module;
for(var b=a.replace(/\./g,"/").split("/"),c=b.length,d=g,f,k=0;k<c;k++)f=b[k],null==d[f]?d[f]={}:this.options().debug>=e.debug.ALL&&v("Module root '"+a+"' has an already defined branch, it will be altered."),k<c-1?d=d[f]:d[f]=this;return this},define:function(a){!0===a&&(a=this.__meta__.module.replace(/\./g,"/"));r.amd?a?g.define(a,w(function(){return this},this)):g.define(w(function(){return this},this)):"server"===y&&(module.exports=this);return this},plug:function(a,b){this.plugins()[a]=b;return this},
configure:function(a){G.call(this.options(),a);return this},updatePrototype:function(){5>m&&h(this,e.Factory);return this}},Function.prototype),Instance:{perform:{ORDER:["prototype","nested"],add:function(a,b,c){if("ORDER"===a||"add"===a)throw"Factory perform function name '"+a+"' is reserved.";this[a]=b;b=this.ORDER.length;var d=-1,e=0,f=[];c&&("first"===c?d=0:0===c.indexOf("before:")?d=this.ORDER.indexOf(c.substring(7)):0===c.indexOf("after:")&&(d=this.ORDER.indexOf(c.substring(6))+1));-1===d&&
(d=b);for(c=0;c<b;c++)c===d&&e++,f[c+e]=this.ORDER[c];f[d]=a;this.ORDER=f},prototype:function(a){var b,c;for(c in a.prototype)b=a.prototype[c],f.funct(b)||(a.__meta__.skeleton["public"][c]?this[c]=p(b):a.__meta__.skeleton.hidden[c]&&(this[c]=p(b),q(this,c,{enumerable:!1,configurable:!0})));for(var d in a.__meta__.skeleton.concealed)b=a.prototype[d],f.funct(b)||(this[d]=p(b),q(this,d,{enumerable:!1,configurable:!0}))},nested:function(a){var b,c;for(c in a.__meta__.skeleton.nested){f.object(this[c])||
(this[c]={});for(var d in a.__meta__.skeleton.nested[c])b=a.__meta__.skeleton.nested[c][d],f.funct(b)?this[c][d]=w(b,this):this[c][d]=p(b)}}},init:function(a,b){if(!1===this.initialize)throw"Prototype is static and cannot be instanciated.";for(var c=e.Instance.perform,d=0,f=c.ORDER.length;d<f;d++)c[c.ORDER[d]].call(this,a);return!0===a.__meta__.skeleton["public"].initialize?this.initialize.apply(this,b):this}},Prototype:function(a,b){var c=function(){return this===g?H(c,arguments):e.Instance.init.call(this,
c,arguments)};c.__meta__={skeleton:p(e.Skeleton.modifiers),options:u(l),plugins:u(r)};D(c,e.Factory);2===arguments.length?F(a,function(a){f.object(b)?c.set(b):f.funct(b)&&b.call(c,c,w(c.set,c),a);f.funct(c.main)&&c.main.call(c,c);return c}):(f.object(a)?c.set(a):f.funct(a)&&a.call(c,c,w(c.set,c)),f.funct(c.main)&&c.main.call(c,c));return c}};(function(){var a=function(a){return 10>a?"0"+a:""+a};e.version.core=n[0];e.version.update=n[1];e.version.correction=n[2];e.version.build=1E5*n[0]+1E3*n[1]+n[2];
e.version.date=n[3];e.version.toString=function(){return"Object\u00ffve version "+e.version.core+"."+e.version.update+"."+e.version.correction+" (build "+e.version()+") dated "+n[3].getFullYear()+"."+a(n[3].getMonth()+1)+"."+a(n[3].getDate())+" / ECMAScript "+m+" detected"};"function"===typeof g.define&&g.define(e);"server"===y&&(module.exports=e);g.Objectyve=e})()}("undefined"!==typeof window&&window.document?"client":"undefined"!==typeof module&&module.exports?"server":"undefined");
