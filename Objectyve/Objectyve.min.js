/**
 * Objectÿve framework bêta
 *
 * @author      Thomas Josseau
 * @version     0.4.3
 * @date        2014.04.20
 * @link        https://github.com/tjosseau/objectyve
 *
 * @description
 *      JavaScript framework to simplify prototypes construction.
 *      (Second core bêta version)
 */
void function(r){var k,n,e,w;switch(r){case "client":k=window;break;case "server":k=GLOBAL;break;default:k={}}n="function"===typeof Object.setPrototypeOf?6:"function"===typeof function(){}.__proto__?5:4;w=k.Objectyve;var g=[0,4,3,new Date(2014,3,20)],p={silent:!1,strict:0,debug:0},s={requirejs:null},x={constructor:"_constructor"},t=Object.defineProperty,u=function(a){!p.silent&&console&&console.info("/!\\ "+a)},f={object:function(a){return null!=a&&"object"===typeof a&&!f.array(a)},bool:function(a){return"boolean"=== typeof a},array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},number:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},string:function(a){return"string"===typeof a},funct:function(a){return"function"===typeof a},container:function(a){return f.object(a)||f.array(a)},empty:function(a){for(undefined in a)return!1;return!0},constructor:function(a){return"constructor"===a}},l=function(a){var b={},c;for(c in a)f.object(a[c])?b[c]=l(a[c]):b[c]=a[c];return b},m=function(a,b){for(var c in b)a[c]= b[c]},q=function(a,b){for(var c in b)c in x?a[x[c]]=b[c]:a[c]=b[c]},y=function(){return[].concat.apply([],arguments).filter(function(a,b,c){return null!=a&&c.indexOf(a)===b})},A=function(a,b){return function(){return b.apply(a,arguments)}},v=function(a,b,c){var d=a.__meta__,h;for(h in d.skeleton)if(d.skeleton[h][b]){if("constructor"!==b&&d.options.strict>=e.strict.HIGH)throw"Member named '"+b+"' is already defined.";delete d.skeleton[h][b];break}d.skeleton[c][b]=!0;t(a.prototype,b,{writable:!0,enumerable:"concealed"!== c,configurable:!0})},z=function(a){null!=a.silent&&(this.silent=!!a.silent);null!=a.debug&&(!1===a.debug?this.debug=0:!0===a.debug?this.debug=1:0===a.debug?this.debug=0:0<a.debug&&3>=a.debug&&(this.debug=a.debug));null!=a.strict&&(!1===a.strict?this.strict=0:!0===a.strict?this.strict=1:0===a.strict?this.strict=0:0<a.strict&&2>=a.strict&&(this.strict=a.strict))};e={ECMAScript:n,debug:{SILENT:0,MINIMAL:1,MEDIUM:2,ALL:3},strict:{NONE:0,LOW:1,HIGH:2},options:p,plugins:s,noConflict:function(){k.Objectyve= w;return e},version:function(){return this.version.build},configure:function(a){z.call(p,a);return this},plug:function(a){m(s,a);return this},globalize:function(){for(var a=0,b=arguments.length;a<b;a++)k[arguments[a]]=e[arguments[a]];return this},util:{is:f,clone:l,copy:m,list:y,filter:function(a,b,c){var d={},e="",f;for(f in a)0===f.indexOf(c)&&(e=f.substr(c.length,f.length-1),b[e]=d[e]=a[f],delete a[f]);return d}},echo:function(){!p.silent&&console&&(4<n?console.log.apply(console,arguments):console.log(arguments[0])); return arguments[0]},warn:u,Skeleton:{"public":{},hidden:{},concealed:{},nested:{}},Constructor:{metadata:function(){return this.__meta__},options:function(){return this.__meta__.options},plugins:function(){return this.__meta__.plugins},module:function(a){for(var b=a.split("/"),c=b.length,d=k,h,g=0;g<c;g++){h=b[g];if(null==d[h])d[h]={};else if(!f.object(d[h])&&!f.funct(d[h])&&this.__meta__.options.strict>=e.strict.LOW)throw"Invalid module root '"+d[h]+"' for '"+a+"'.";g<c-1?d=d[h]:d[h]=this}return this}, extend:function(a){this.prototype=Object.create(a.prototype);a.__meta__&&a.__meta__.skeleton&&(m(this.__meta__.skeleton["public"],a.__meta__.skeleton["public"]),m(this.__meta__.skeleton.hidden,a.__meta__.skeleton.hidden));this.parent=a;return this},mixin:function(){for(var a=y.apply(null,arguments),b,c=0,d=a.length;c<d;c++){b=a[c];if(b.prototype)m(this.prototype,b.prototype);else if(f.object(b))m(this.prototype,b);else throw"Cannot mixin '"+b+"' with a prototype.";b.__meta__&&b.__meta__.skeleton&& (m(this.__meta__.skeleton["public"],b.__meta__.skeleton["public"]),m(this.__meta__.skeleton.hidden,b.__meta__.skeleton.hidden))}return this},"public":function(a){q(this.prototype,a);for(var b in a)v(this,b,"public");return this},hidden:function(a){q(this.prototype,a);for(var b in a)v(this,b,"hidden");return this},concealed:function(a){q(this.prototype,a);for(var b in a)v(this,b,"concealed");return this},prototype:function(a){q(this.prototype,a);return this},"static":function(a){q(this,a);return this}, nest:function(a){for(var b in a)this.__meta__.skeleton.nested[b]=l(a[b]);return this},plug:function(a,b){this.__meta__.plugins[a]=b;return this},configure:function(a){z.call(this.__meta__.options,a);return this},define:function(a,b){if(this.__meta__.plugins.requirejs){var c=this;k.define(a||[],function(){f.funct(b)&&b.apply(c,arguments);return c})}else if("server"===r){var d=[];if(a)for(var h=0,g=a.length;h<g;h++)d.push(require(a[h]));f.funct(b)&&b.apply(this,d);module.exports=this}else this.__meta__.options.debug>= e.debug.MINIMAL&&(u("Constructor definition function 'define()' called without effect."),f.funct(b)&&b.apply(this,d));return this}},Instance:{perform:{ORDER:["prototype","nested"],add:function(a,b,c){if("ORDER"===a||"add"===a)throw"Constructor perform function name '"+a+"' is reserved.";this[a]=b;b=this.ORDER.length;var d=-1,e=0,f=[];c&&("first"===c?d=0:0===c.indexOf("before:")?d=this.ORDER.indexOf(c.substring(7)):0===c.indexOf("after:")&&(d=this.ORDER.indexOf(c.substring(6))+1));-1===d&&(d=b);for(c= 0;c<b;c++)c===d&&e++,f[c+e]=this.ORDER[c];f[d]=a;this.ORDER=f},prototype:function(a){var b,c;for(c in a.prototype)b=a.prototype[c],f.funct(b)||(a.__meta__.skeleton["public"][c]?f.object(b)?this[c]=l(b):this[c]=b:a.__meta__.skeleton.hidden[c]&&(f.object(b)?this[c]=l(b):this[c]=b,t(this,c,{enumerable:!1,configurable:!0})));for(var d in a.__meta__.skeleton.concealed)b=a.prototype[d],f.funct(b)||(f.object(b)?this[d]=l(b):this[d]=b,t(this,d,{enumerable:!1,configurable:!0}))},nested:function(a){var b,c; for(c in a.__meta__.skeleton.nested){f.object(this[c])||(this[c]={});for(var d in a.__meta__.skeleton.nested[c])b=a.__meta__.skeleton.nested[c][d],f.funct(b)?this[c][d]=A(this,b):f.object(b)?this[c][d]=l(b):this[c][d]=b}}},init:function(a,b){for(var c=e.Instance.perform,d=0,f=c.ORDER.length;d<f;d++)c[c.ORDER[d]].call(this,a);return!0===a.__meta__.skeleton["public"].constructor?this._constructor.apply(this,b):this}},Prototype:function(a){var b=function(){return e.Instance.init.call(this,b,arguments)}; b.__meta__={definition:{},skeleton:l(e.Skeleton),options:l(p),plugins:l(s)};switch(n){case 6:Object.setPrototypeOf(b,e.Constructor);case 5:b.__proto__=e.Constructor}if(f.object(a)){a.configure&&(b.configure(a.configure),delete a.configure);a.plug&&(b.plug(a.plug),delete a.plug);for(var c in a)if(b[c])b[c](a[c]);else{if(b.options().strict===e.strict.HIGH)throw"Invalid call '"+c+"' while creating new Prototype.";b.options().strict===e.strict.LOW&&u("Invalid call '"+c+"' while creating new Prototype.")}}return b}}; (function(){e.options.strict=e.strict.LOW;var a=function(a){return 10>a?"0"+a:""+a};e.version.core=g[0];e.version.update=g[1];e.version.correction=g[2];e.version.build=1E5*g[0]+1E3*g[1]+g[2];e.version.date=g[3].getTime();e.version.toString=function(){return"Object\u00ffve version "+e.version.core+"."+e.version.update+"."+e.version.correction+" (build "+e.version()+") dated "+g[3].getFullYear()+"."+a(g[3].getMonth()+1)+"."+a(g[3].getDate())};"server"===r?module.exports=e:"function"===typeof k.define? k.define(e):k.Objectyve=e;5>n&&m(Function.prototype,e.Constructor)})()}("undefined"!==typeof window&&window.document?"client":"undefined"!==typeof module&&module.exports?"server":"undefined");
